<!DOCTYPE module SYSTEM "module.dtd">

<module name="cnn_guided" dir="cnn_guided">
  <doc>
    <description>
    This module receives control inputs from a Convolutional Neural Network, consisting of confidence values for left, forward and center.
    Based on the confidences, location and history of controls, it sends new controls to the Bebop in order to avoid obstacles along the way.
    </description>
    <define name="CNN_CONTROL_INPUTS_ID" value="ABI_BROADCAST" description="ID for ABI messaging of CNN control inputs"/>
  </doc>
  <settings>
    <dl_settings>
      <dl_settings name="cnn_guided">
         <dl_setting var="oag_max_speed" min="0" step="0.1" max="1"/>
         <dl_setting var="oag_heading_rate" min="0" step="5" max="45" unit="rad" alt_unit="deg"/>
         <dl_setting var="base_speed_fraction" min="0" step="0.1" max="1"/>
      </dl_settings>
    </dl_settings>
  </settings>
  
  <dep>
    <depends>cnn</depends>
  </dep>
  <header>
    <file name="cnn_guided.h"/>
  </header>
  <init fun="cnn_guided_init()"/>
  <periodic fun="cnn_guided_periodic()" freq="8"/>
  <makefile target="ap|nps">
    <file name="cnn_guided.c"/>
  </makefile>
</module>
